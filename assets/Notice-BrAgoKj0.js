import{aP as f,a as y,c as V,o as I,d as O,e as E,f as l,w as o,g as e,h as c,t as p,ag as A,F as L,E as $,i as j,ai as z}from"./index-Cxs7iahU.js";import{E as G}from"./el-dialog-nenOhrOA.js";import{E as J}from"./el-switch-n-mbwJrJ.js";import{a as K,E as M}from"./el-form-item-gSEbeYeG.js";import{u as Q}from"./use-table-handlers-D1FrOxBz.js";const X=n=>f({url:"sys/notice/listPage",method:"get",data:n}),Y=n=>f({url:"sys/notice/save",method:"post",data:n}),Z=n=>(delete n.id,f({url:"sys/notice/update/${id}",method:"post",data:n})),ee=n=>f({url:"sys/notice/delete",method:"post",data:n}),te={class:"main-body"},le={class:"toolbar"},de={__name:"Notice",setup(n){const s=y({title:""}),r=y({id:"",title:"",content:"",isPublish:!1}),{t,tableRef:k,dialogVisible:_,isEdit:w,formLoading:C,formRef:v,dosearch:T,doAdd:x,doEdit:R,doSubmit:B,doClose:b,doRemove:P}=Q(r),W=V(()=>[{type:"selection"},{prop:"id",label:t("thead.ID"),minWidth:50},{prop:"title",label:t("thead.title"),minWidth:120,showOverflowTooltip:!0},{prop:"content",label:t("thead.content"),minWidth:120,showOverflowTooltip:!0},{prop:"publishTime",label:t("thead.publishTime"),minWidth:120},{prop:"createdTime",label:t("thead.createdTime"),minWidth:120},{prop:"createdBy",label:t("thead.createdBy"),minWidth:120}]),q=[{type:"edit",disabled:u=>!!u.publishTime},{type:"delete"}],D=V(()=>({title:[{required:!0,message:t("form.titleRequired"),trigger:["blur","change"]},{min:2,max:60,message:t("form.titleError"),trigger:["blur","change"]}],content:[{required:!0,message:t("form.contentRequired"),trigger:["blur","change"]},{min:2,max:300,message:t("form.contentError"),trigger:["blur","change"]}]}));function U(u,a){P(ee,u,a)}function F(){B({save:Y,update:Z})}return(u,a)=>{const h=$,d=K,m=j,g=M,H=z,N=J,S=G;return I(),O(L,null,[E("div",te,[E("div",le,[l(g,{inline:!0,model:e(s)},{default:o(()=>[l(d,null,{default:o(()=>[l(h,{modelValue:e(s).title,"onUpdate:modelValue":a[0]||(a[0]=i=>e(s).title=i),plceholder:e(t)("thead.title")},null,8,["modelValue","plceholder"])]),_:1}),l(d,null,{default:o(()=>[l(m,{icon:"search",type:"primary",onClick:e(T)},{default:o(()=>[c(p(e(t)("action.search")),1)]),_:1},8,["onClick"])]),_:1}),l(d,null,{default:o(()=>[l(m,{icon:"plus",type:"primary",onClick:e(x)},{default:o(()=>[c(p(e(t)("action.add")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),l(H,{ref_key:"tableRef",ref:k,"get-page":e(X),filters:e(s),columns:e(W),operations:q,onHandleEdit:e(R),onHandleDlete:U},null,8,["get-page","filters","columns","onHandleEdit"])]),l(S,{title:e(w)?e(t)("action.edit"):e(t)("action.add"),modelValue:e(_),"onUpdate:modelValue":a[4]||(a[4]=i=>A(_)?_.value=i:null),draggable:"",width:"40%","close-on-click-modal":!1,onClose:e(b)},{footer:o(()=>[l(m,{onClick:e(b)},{default:o(()=>[c(p(e(t)("action.cancel")),1)]),_:1},8,["onClick"]),l(m,{type:"primary",loading:e(C),onClick:F},{default:o(()=>[c(p(e(t)("action.submit")),1)]),_:1},8,["loading"])]),default:o(()=>[l(g,{ref_key:"formRef",ref:v,model:e(r),rules:e(D),"label-width":"80px","label-position":"right"},{default:o(()=>[l(d,{label:e(t)("thead.title"),prop:"title"},{default:o(()=>[l(h,{modelValue:e(r).title,"onUpdate:modelValue":a[1]||(a[1]=i=>e(r).title=i)},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:e(t)("thead.content"),prop:"content"},{default:o(()=>[l(h,{type:"textarea",modelValue:e(r).content,"onUpdate:modelValue":a[2]||(a[2]=i=>e(r).content=i),"words-limit":300},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:e(t)("thead.publish")},{default:o(()=>[l(N,{modelValue:e(r).isPublish,"onUpdate:modelValue":a[3]||(a[3]=i=>e(r).isPublish=i)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])],64)}}};export{de as default};
