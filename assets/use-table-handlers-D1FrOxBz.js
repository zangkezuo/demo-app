import{j as y,r as l,x as C}from"./index-Cxs7iahU.js";function V(s){const{t:d}=y(),n=l(),o=l(!1),a=l(!1),i=l(!1),u=l(),f={...s},g=()=>{n.value.reload()},p=()=>{o.value=!0,a.value=!1,u.value&&u.value.clearValidate()},h=e=>{if(s){a.value=!0,o.value=!0;for(const t in s)t in e&&(s[t]=e[t])}},_=(e,t,r)=>{e({id:t}).then(()=>{r&&r()})},E=()=>{const e={...s};return a.value||delete e.id,e},R=(e,t)=>{!s||!e||u.value.validate(r=>{if(r){i.value=!0;let c;const m=e.getparams?e.getparams():E();a.value?c=e.update(m):c=e.save(m),c.then(x=>{t?t(x):C({message:d("tips.success"),type:"success",showClose:!0}),v(),a.value?n.value.refresh():n.value.reload()}).finally(()=>{i.value=!1})}})},b=()=>{if(s)for(const e in f)s[e]=f[e]};function v(){o.value=!1,b()}return{t:d,tableRef:n,dialogVisible:o,isEdit:a,formLoading:i,formRef:u,doSearch:g,doAdd:p,doEdit:h,doSubmit:R,doClose:v,doRemove:_}}export{V as u};
