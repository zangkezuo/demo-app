import{B as Te,C as Pe,D as we,G as D,H as Q,I as ce,J as M,K,L as Z,M as ee,N as U,r as g,m as z,O as te,P as ue,o as A,d as ae,Q as de,g as x,R as $e,S as be,T as O,U as Se,V as xe,c as V,W as fe,X as Ee,f as v,Y as L,Z as Be,$ as ke,a0 as Oe,a1 as I,a2 as Re,a3 as J,a4 as ze,a5 as ve,a6 as le,a7 as Ae,a8 as Me,a9 as Ve,aa as oe,a as Fe,ab as Le,ac as Ie,ad as De,s as me,ae as Ke,af as Ue,j as He,n as Y,w as re,ag as We,p as je,F as qe}from"./index-Cxs7iahU.js";import Xe from"./MessageItem-oyaeqeGw.js";const Ye=(t,a,o)=>Pe(t.subTree).filter(e=>{var u;return we(e)&&((u=e.type)==null?void 0:u.name)===a&&!!e.component}).map(e=>e.component.uid).map(e=>o[e]).filter(e=>!!e),Ge=(t,a)=>{const o={},_=Te([]);return{children:_,addChild:u=>{o[u.uid]=u,_.value=Ye(t,a,o)},removeChild:u=>{delete o[u],_.value=_.value.filter(w=>w.uid!==u)}}},H=Symbol("tabsRootContextKey"),Je=D({tabs:{type:Q(Array),default:()=>ce([])}}),pe="ElTabBar",Qe=M({name:pe}),Ze=M({...Qe,props:Je,setup(t,{expose:a}){const o=t,_=K(),c=Z(H);c||ee(pe,"<el-tabs><el-tab-bar /></el-tabs>");const e=U("tabs"),u=g(),w=g(),l=()=>{let b=0,$=0;const f=["top","bottom"].includes(c.props.tabPosition)?"width":"height",r=f==="width"?"x":"y",k=r==="x"?"left":"top";return o.tabs.every(s=>{var p,S;const T=(S=(p=_.parent)==null?void 0:p.refs)==null?void 0:S[`tab-${s.uid}`];if(!T)return!1;if(!s.active)return!0;b=T[`offset${O(k)}`],$=T[`client${O(f)}`];const E=window.getComputedStyle(T);return f==="width"&&(o.tabs.length>1&&($-=Number.parseFloat(E.paddingLeft)+Number.parseFloat(E.paddingRight)),b+=Number.parseFloat(E.paddingLeft)),!1}),{[f]:`${$}px`,transform:`translate${O(r)}(${b}px)`}},m=()=>w.value=l();return z(()=>o.tabs,async()=>{await te(),m()},{immediate:!0}),ue(u,()=>m()),a({ref:u,update:m}),(b,$)=>(A(),ae("div",{ref_key:"barRef",ref:u,class:de([x(e).e("active-bar"),x(e).is(x(c).props.tabPosition)]),style:$e(w.value)},null,6))}});var et=be(Ze,[["__file","tab-bar.vue"]]);const tt=D({panes:{type:Q(Array),default:()=>ce([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),at={tabClick:(t,a,o)=>o instanceof Event,tabRemove:(t,a)=>a instanceof Event},ie="ElTabNav",st=M({name:ie,props:tt,emits:at,setup(t,{expose:a,emit:o}){const _=K(),c=Z(H);c||ee(ie,"<el-tabs><tab-nav /></el-tabs>");const e=U("tabs"),u=Se(),w=xe(),l=g(),m=g(),b=g(),$=g(),f=g(!1),r=g(0),k=g(!1),s=g(!0),p=V(()=>["top","bottom"].includes(c.props.tabPosition)?"width":"height"),S=V(()=>({transform:`translate${p.value==="width"?"X":"Y"}(-${r.value}px)`})),T=()=>{if(!l.value)return;const i=l.value[`offset${O(p.value)}`],d=r.value;if(!d)return;const n=d>i?d-i:0;r.value=n},E=()=>{if(!l.value||!m.value)return;const i=m.value[`offset${O(p.value)}`],d=l.value[`offset${O(p.value)}`],n=r.value;if(i-n<=d)return;const C=i-n>d*2?n+d:i-d;r.value=C},F=async()=>{const i=m.value;if(!f.value||!b.value||!l.value||!i)return;await te();const d=b.value.querySelector(".is-active");if(!d)return;const n=l.value,C=["top","bottom"].includes(c.props.tabPosition),N=d.getBoundingClientRect(),y=n.getBoundingClientRect(),B=C?i.offsetWidth-y.width:i.offsetHeight-y.height,P=r.value;let h=P;C?(N.left<y.left&&(h=P-(y.left-N.left)),N.right>y.right&&(h=P+N.right-y.right)):(N.top<y.top&&(h=P-(y.top-N.top)),N.bottom>y.bottom&&(h=P+(N.bottom-y.bottom))),h=Math.max(h,0),r.value=Math.min(h,B)},se=()=>{var i;if(!m.value||!l.value)return;t.stretch&&((i=$.value)==null||i.update());const d=m.value[`offset${O(p.value)}`],n=l.value[`offset${O(p.value)}`],C=r.value;n<d?(f.value=f.value||{},f.value.prev=C,f.value.next=C+n<d,d-C<n&&(r.value=d-n)):(f.value=!1,C>0&&(r.value=0))},ye=i=>{const d=i.code,{up:n,down:C,left:N,right:y}=I;if(![n,C,N,y].includes(d))return;const B=Array.from(i.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),P=B.indexOf(i.target);let h;d===N||d===n?P===0?h=B.length-1:h=P-1:P<B.length-1?h=P+1:h=0,B[h].focus({preventScroll:!0}),B[h].click(),ne()},ne=()=>{s.value&&(k.value=!0)},W=()=>k.value=!1;return z(u,i=>{i==="hidden"?s.value=!1:i==="visible"&&setTimeout(()=>s.value=!0,50)}),z(w,i=>{i?setTimeout(()=>s.value=!0,50):s.value=!1}),ue(b,se),fe(()=>setTimeout(()=>F(),0)),Ee(()=>se()),a({scrollToActiveTab:F,removeFocus:W}),z(()=>t.panes,()=>_.update(),{flush:"post",deep:!0}),()=>{const i=f.value?[v("span",{class:[e.e("nav-prev"),e.is("disabled",!f.value.prev)],onClick:T},[v(L,null,{default:()=>[v(Be,null,null)]})]),v("span",{class:[e.e("nav-next"),e.is("disabled",!f.value.next)],onClick:E},[v(L,null,{default:()=>[v(ke,null,null)]})])]:null,d=t.panes.map((n,C)=>{var N,y,B,P;const h=n.uid,j=n.props.disabled,q=(y=(N=n.props.name)!=null?N:n.index)!=null?y:`${C}`,X=!j&&(n.isClosable||t.editable);n.index=`${C}`;const ge=X?v(L,{class:"is-icon-close",onClick:R=>o("tabRemove",n,R)},{default:()=>[v(Oe,null,null)]}):null,Ce=((P=(B=n.slots).label)==null?void 0:P.call(B))||n.props.label,Ne=!j&&n.active?0:-1;return v("div",{ref:`tab-${h}`,class:[e.e("item"),e.is(c.props.tabPosition),e.is("active",n.active),e.is("disabled",j),e.is("closable",X),e.is("focus",k.value)],id:`tab-${q}`,key:`tab-${h}`,"aria-controls":`pane-${q}`,role:"tab","aria-selected":n.active,tabindex:Ne,onFocus:()=>ne(),onBlur:()=>W(),onClick:R=>{W(),o("tabClick",n,q,R)},onKeydown:R=>{X&&(R.code===I.delete||R.code===I.backspace)&&o("tabRemove",n,R)}},[Ce,ge])});return v("div",{ref:b,class:[e.e("nav-wrap"),e.is("scrollable",!!f.value),e.is(c.props.tabPosition)]},[i,v("div",{class:e.e("nav-scroll"),ref:l},[v("div",{class:[e.e("nav"),e.is(c.props.tabPosition),e.is("stretch",t.stretch&&["top","bottom"].includes(c.props.tabPosition))],ref:m,style:S.value,role:"tablist",onKeydown:ye},[t.type?null:v(et,{ref:$,tabs:[...t.panes]},null),d])])])}}}),nt=D({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Q(Function),default:()=>!0},stretch:Boolean}),G=t=>Ae(t)||Me(t),lt={[ve]:t=>G(t),tabClick:(t,a)=>a instanceof Event,tabChange:t=>G(t),edit:(t,a)=>["remove","add"].includes(a),tabRemove:t=>G(t),tabAdd:()=>!0},ot=M({name:"ElTabs",props:nt,emits:lt,setup(t,{emit:a,slots:o,expose:_}){var c;const e=U("tabs"),{children:u,addChild:w,removeChild:l}=Ge(K(),"ElTabPane"),m=g(),b=g((c=t.modelValue)!=null?c:"0"),$=async(s,p=!1)=>{var S,T,E;if(!(b.value===s||le(s)))try{await((S=t.beforeLeave)==null?void 0:S.call(t,s,b.value))!==!1&&(b.value=s,p&&(a(ve,s),a("tabChange",s)),(E=(T=m.value)==null?void 0:T.removeFocus)==null||E.call(T))}catch{}},f=(s,p,S)=>{s.props.disabled||($(p,!0),a("tabClick",s,S))},r=(s,p)=>{s.props.disabled||le(s.props.name)||(p.stopPropagation(),a("edit",s.props.name,"remove"),a("tabRemove",s.props.name))},k=()=>{a("edit",void 0,"add"),a("tabAdd")};return z(()=>t.modelValue,s=>$(s)),z(b,async()=>{var s;await te(),(s=m.value)==null||s.scrollToActiveTab()}),Re(H,{props:t,currentName:b,registerPane:w,unregisterPane:l}),_({currentName:b}),()=>{const s=o["add-icon"],p=t.editable||t.addable?v("span",{class:e.e("new-tab"),tabindex:"0",onClick:k,onKeydown:E=>{E.code===I.enter&&k()}},[s?J(o,"add-icon"):v(L,{class:e.is("icon-plus")},{default:()=>[v(ze,null,null)]})]):null,S=v("div",{class:[e.e("header"),e.is(t.tabPosition)]},[p,v(st,{ref:m,currentName:b.value,editable:t.editable,type:t.type,panes:u.value,stretch:t.stretch,onTabClick:f,onTabRemove:r},null)]),T=v("div",{class:e.e("content")},[J(o,"default")]);return v("div",{class:[e.b(),e.m(t.tabPosition),{[e.m("card")]:t.type==="card",[e.m("border-card")]:t.type==="border-card"}]},[...t.tabPosition!=="bottom"?[S,T]:[T,S]])}}}),rt=D({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),it=["id","aria-hidden","aria-labelledby"],he="ElTabPane",ct=M({name:he}),ut=M({...ct,props:rt,setup(t){const a=t,o=K(),_=Ve(),c=Z(H);c||ee(he,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const e=U("tab-pane"),u=g(),w=V(()=>a.closable||c.props.closable),l=oe(()=>{var r;return c.currentName.value===((r=a.name)!=null?r:u.value)}),m=g(l.value),b=V(()=>{var r;return(r=a.name)!=null?r:u.value}),$=oe(()=>!a.lazy||m.value||l.value);z(l,r=>{r&&(m.value=!0)});const f=Fe({uid:o.uid,slots:_,props:a,paneName:b,active:l,index:u,isClosable:w});return fe(()=>{c.registerPane(f)}),Le(()=>{c.unregisterPane(f.uid)}),(r,k)=>x($)?Ie((A(),ae("div",{key:0,id:`pane-${x(b)}`,class:de(x(e).b()),role:"tabpanel","aria-hidden":!x(l),"aria-labelledby":`tab-${x(b)}`},[J(r.$slots,"default")],10,it)),[[De,x(l)]]):me("v-if",!0)}});var _e=be(ut,[["__file","tab-pane.vue"]]);const dt=Ke(ot,{TabPane:_e}),bt=Ue(_e),mt={__name:"index",setup(t){const{t:a}=He(),o=g("system"),_=V(()=>[{name:"system",label:a("personal.Messages")},{name:"private",label:a("personal.SiteMail")}]);return(c,e)=>{const u=bt,w=dt;return A(),Y(w,{modelValue:x(o),"onUpdate:modelValue":e[0]||(e[0]=l=>We(o)?o.value=l:null),class:"tabs"},{default:re(()=>[(A(!0),ae(qe,null,je(x(_),(l,m)=>(A(),Y(u,{key:m,label:l.label,name:l.name},{default:re(()=>[x(o)===l.name?(A(),Y(Xe,{key:0,type:l.name},null,8,["type"])):me("",!0)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])}}};export{mt as default};
